<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">
<head th:replace="/fragments/header :: header(${'Dashboard'})">
</head>
<body>


<div th:fragment="medicationCard">
    <div class="card cardSpace large hoverable col m3">
        <button data-target="addMedication" class="addButton btn btn-floating btn-large waves-effect waves-light green"><i class="material-icons">add</i></button>
        <div class="card-image waves-effect waves-block waves-light center-align">
            <i class="large activator material-icons dash-icons">reorder</i>
        </div>
        <div class="card-content">
            <span class="card-title activator grey-text text-darken-4">Medication</span>
            <div class="divider"></div>
                <div th:each="prescriptions : ${prescriptions}" th:object="${prescriptions}">
            <form th:action="@{/dashboard/medTaken}" method="post">
                    <a th:href="*{'#' + name}" ><p th:text="*{name}"></p></a>
                    <input name="id" th:value="*{Id}" type="hidden" />
                    <button id="takeMedication"  type="submit" class="btn  btn-info">Taken</button>
            </form>
                </div>
        </div>
        <!--<div class="card-reveal">-->
            <!---->
        <!--</div>-->
        <div th:each="prescriptions : ${prescriptions}" th:object="${prescriptions}">
            <div th:id="*{name}" class="modal bottom-sheet">
                <div class="modal-content">
                    <h4 th:text="*{name}">Medication Name</h4>
                    <p th:text="*{sig}">A bunch of text</p>
                    <a th:href="*{'#' + Id}">Edit</a>
                    <a th:href="*{'#' + Id + 'delete'}">Delete</a>
                </div>
                <div class="modal-footer">
                    <a href="#!" class=" modal-action modal-close waves-effect waves-green btn-flat">Dismiss</a>
                </div>
            </div>
        </div>
        <div th:each="prescriptions : ${prescriptions}" th:object="${prescriptions}">
            <div th:id="*{Id + 'delete'}" class="modal">
                <div class="modal-content">
                    <h4>Delete Prescription</h4>
                    <p>Are you sure you want to delete this prescription?</p>
                    <a th:href="@{'/deletePrescription/' + *{Id}}" >Delete</a>
                    <a href="#!" class=" modal-action modal-close waves-effect waves-green btn-flat">Cancel</a>
                </div>

            </div>
        </div>


        <div th:each="prescriptions : ${prescriptions}" th:object="${prescriptions}">
            <div th:id="*{Id}" class="modal">
                <div class="modal-content">
                    <h4>Edit Prescription</h4>
                    <form name="editPrescriptionForm" id="editPrescriptionForm" th:action="@{/editPrescription}" th:method="post" th:object="${prescription}">
                        <div class="input-field col s6">
                            <input name="id" th:value="${prescriptions.Id}" type="hidden" />
                            <input name="name" type="text" id="autocomplete-input" class="autocomplete autocomplete-input" th:value="${prescriptions.name}" />
                            <label for="autocomplete-input">Name of Medication</label>
                        </div>
                        <div class="input-field col s6">
                            <label for="prescribedDate">Prescribed Date</label>
                            <input name="date" type="date" class="validate datepicker" id="prescribedDate"
                                   th:value="${prescriptions.prescribedDate}"/>
                            <p th:if="${#fields.hasErrors('prescribedDate')}" th:errors="*{prescribedDate}"></p>
                        </div>
                        <div class="input-field col s6">
                            <label for="strength">Strength</label>
                            <input name="strength" type="text" class="validate" id="strength" th:value="${prescriptions.strength}"/>
                            <p th:if="${#fields.hasErrors('strength')}" th:errors="*{strength}"></p>
                        </div>
                        <div class="input-field col s6">
                            <label for="sig">Directions</label>
                            <input name="sig" type="text" class="validate" id="sig"
                                   placeholder="Take 1 tablet by mouth twice a day for thirty days."
                                   th:value="${prescriptions.sig}"/>
                            <p th:if="${#fields.hasErrors('sig')}" th:errors="*{sig}"></p>
                        </div>
                        <div class="input-field col s6">
                            <label for="daySupply">Day Supply</label>
                            <input name="daySupply" type="text" class="validate" id="daySupply"
                                   th:value="${prescriptions.daySupply}"/>
                            <p th:if="${#fields.hasErrors('daySupply')}" th:errors="*{daySupply}"></p>
                        </div>
                        <div class="input-field col s6">
                            <label for="prescribedQuantity">Prescribed Quantity</label>
                            <input name="prescribedQuantity" type="text" class="validate" id="prescribedQuantity" th:value="${prescriptions.prescribedQuantity}"/>
                            <p th:if="${#fields.hasErrors('prescribedQuantity')}" th:errors="*{prescribedQuantity}"></p>
                        </div>
                        <input type="submit" value="Edit" />
                    </form>
                </div>
                <!--<div class="modal-footer">-->
                    <!--<button class="btn btn-info editPrescriptionSubmit">Edit</button>-->
                <!--</div>-->
            </div>
        </div>
    </div>
</div>

</body>
</html>